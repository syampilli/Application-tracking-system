<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Candidate - Mini ATS</title>
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg, #e0e7ff 0%, #f9fafb 70%, #c7ddff 100%);
    }
    header {
        background-color: rgba(74,144,226,0.95);
        color: white;
        padding: 1rem;
        text-align: center;
        box-shadow: 0 2px 15px rgba(0,0,0,0.05);
    }

    /* Layout */
    main {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        padding: 1.5rem;
        max-width: 1200px;
        margin: auto;
    }

    /* Form Styling */
    .form-section {
        flex: 1 1 55%;
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 3px 15px rgba(0,0,0,0.05);
        animation: fadeIn 0.8s ease;
    }
    .form-section h2 {
        margin-top: 0;
    }
    input, select, textarea, button {
        width: 100%;
        padding: 10px;
        margin-bottom: 12px;
        border: 1px solid #ccc;
        border-radius: 5px;
        transition: all 0.3s ease;
    }
    input:focus, select:focus, textarea:focus {
        border-color: #4a90e2;
        box-shadow: 0 0 8px rgba(74,144,226,0.3);
        outline: none;
    }
    button {
        background-color: #4a90e2;
        color: white;
        border: none;
        cursor: pointer;
    }
    button:hover {
        background-color: #3570b6;
        transform: translateY(-2px);
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    /* Candidate List Preview */
    .list-preview {
        flex: 1 1 40%;
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 3px 15px rgba(0,0,0,0.05);
        animation: slideIn 0.8s ease;
        max-height: 500px;
        overflow-y: auto;
    }
    .list-preview h3 {
        margin-top: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .list-preview table {
        width: 100%;
        border-collapse: collapse;
    }
    .list-preview th, .list-preview td {
        border: 1px solid #eee;
        padding: 8px;
        font-size: 0.9rem;
    }
    .list-preview tbody tr:hover {
        background-color: #f5f9ff;
        transition: background 0.3s ease;
    }
    .list-preview a {
        text-decoration: none;
        color: #4a90e2;
    }
    .list-preview a:hover {
        color: #3570b6;
    }

    /* Animations */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideIn {
        from { opacity: 0; transform: translateX(30px); }
        to { opacity: 1; transform: translateX(0); }
    }

    /* Responsive */
    @media (max-width: 900px) {
        main { flex-direction: column; }
        .form-section, .list-preview { flex: 1 1 100%; }
    }
</style>
</head>
<body>

<header>
    <h1>Mini ATS - Add Candidate</h1>
</header>

<main>
    <!-- Form Section -->
    <section class="form-section">
        <h2>Add Candidate</h2>
        <form id="candidateForm">
            <input type="text" id="name" placeholder="Candidate Name" required>
            <input type="text" id="channel" placeholder="Sourcing Channel" required>
            <input type="url" id="resume" placeholder="Resume Link" required>

            <select id="stage">
                <option value="Screened">Screened</option>
                <option value="Interviewed">Interviewed</option>
                <option value="Offered">Offered</option>
                <option value="Hired">Hired</option>
            </select>

            <input type="date" id="followUp">
            <textarea id="feedback" placeholder="Interviewer Feedback"></textarea>

            <button type="submit">Add Candidate</button>
        </form>
        <a href="list.html">View Full Candidate List →</a>
    </section>

    <!-- Candidate List Preview -->
    <section class="list-preview">
        <h3>Recent Candidates <span style="font-size:0.8rem;color:#4a90e2;">(Preview)</span></h3>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Stage</th>
                </tr>
            </thead>
            <tbody id="previewTable"></tbody>
        </table>
    </section>
</main>

<script>
    let candidates = JSON.parse(localStorage.getItem('candidates')) || [];

    const form = document.getElementById('candidateForm');
    const previewTable = document.getElementById('previewTable');

    function renderPreview() {
        previewTable.innerHTML = '';
        // Show only the latest 5 candidates
        candidates.slice(-5).reverse().forEach(c => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><a href="${c.resume}" target="_blank">${c.name}</a></td>
                <td>${c.stage}</td>
            `;
            previewTable.appendChild(row);
        });
    }

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        const candidate = {
            name: document.getElementById('name').value,
            channel: document.getElementById('channel').value,
            resume: document.getElementById('resume').value,
            stage: document.getElementById('stage').value,
            followUp: document.getElementById('followUp').value,
            feedback: document.getElementById('feedback').value
        };
        candidates.push(candidate);
        localStorage.setItem('candidates', JSON.stringify(candidates));
        this.reset();
        renderPreview();
        alert("✅ Candidate Added!");
    });

    renderPreview();
</script>

</body>
</html>
